---
import { getPreferredLocale, getTranslations } from "@/utils/i18n.ts";
import AuthIsland from "./auth-island.astro";
import Logo from "/favicon.svg?raw";

const locale = getPreferredLocale(Astro.request.headers);
const i18n = getTranslations(locale);
---

<header
    class="sticky top-0 z-20 flex h-16 items-center gap-4 border-b bg-background/30 backdrop-blur-sm px-4 md:px-8"
>
    <nav class="flex flex-row items-center gap-6 text-sm font-semibold">
        <a href="/" class="flex items-center gap-2 text-base font-bold">
            <div class="flex h-6 w-6">
                <Fragment set:html={Logo} />
            </div>
            <span>Paperloop</span>
        </a>
        {Astro.locals.user &&
            <a
                href="/docs"
                class="hidden md:block text-foreground transition-colors hover:text-foreground"
            >
                {i18n("my-documents")}
            </a>
        }
    </nav>
    <nav class="ml-auto flex items-center gap-2">
        <slot></slot>
        <AuthIsland server:defer></AuthIsland>
    </nav>
</header>

<style>
    @media print {
        header {
            display: none;
        }
    }
</style>
